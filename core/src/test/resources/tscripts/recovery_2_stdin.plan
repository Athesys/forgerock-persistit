logpath $datapath$/result_$timestamp$.log


// Runs the second half of the StressRecovery.  The first half wrote
// a file containing a "ticket" for each completed transaction.
// This second phase tests whether each completed transaction
// is actually present in the recovered database.
//
// This plan assumes that completed tickets were piped to
// file $datapath$/recovery.log
//
//
// To run this:
// 
//    java -cp ${PERSISTIT_JAR} com.persistit.test.TestRunner 
//              script=recovery_2.plan datapath=/tmp/persistit_test_data -e
//
// The -e flag causes TestRunner to exit with a non-zero status on failure.
//
prop buffer.memory.16384=64M,1T,256M,0.7
prop volume.1=$datapath$/persistit,create,pageSize:16384,initialSize:100M,extensionSize:100M,maximumSize:100G,alias:persistit
prop journalpath=$datapath$/persistit_journal
prop logfile=$datapath$/persistit_$timestamp$.log
prop rmiport=8081
prop appendonly=true

init
test com.persistit.stress.StressRecovery verify=stdin latency=1000

icheck persistit
close

