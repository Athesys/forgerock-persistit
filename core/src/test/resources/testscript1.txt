====
    Copyright (C) 2011 Akiban Technologies Inc.
    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License, version 3,
    as published by the Free Software Foundation.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see http://www.gnu.org/licenses.
====

logpath $logpath$/result_$timestamp$.log

#Stress-99 test mixture, multithread, 50000 buffers

clearprops
prop buffer.count.8192=50000
prop volume.1=$datapath$/persistit,create,bufferSize:8192,initialSize:10M,extensionSize:10M,maximumSize:4G
prop logfile=$datapath$/persistit.log
prop journalpath=$datapath$/persistit_journal
prop rmiport=1099

init
icheck persistit
waitIfFailed Please examine the failure!

multithread

test com.persistit.stress.Stress1 repeat=1 count=1000000

test com.persistit.stress.Stress2 repeat=2 count=150000 seed=117
test com.persistit.stress.Stress5 repeat=5 count=100000
test com.persistit.stress.Stress6 repeat=1 count=50000 size=250
test com.persistit.stress.Stress7 repeat=1 count=60000 size=250 seed=121
test com.persistit.stress.Stress1 repeat=1 count=600000
test com.persistit.stress.Stress2 repeat=1 count=1000000 seed=217
test com.persistit.stress.Stress1 repeat=2 count=5000000

test com.persistit.stress.Stress2 repeat=3 count=150000 seed=118
test com.persistit.stress.Stress5 repeat=5 count=100000
test com.persistit.stress.Stress6 repeat=2 count=25000 size=250
test com.persistit.stress.Stress7 repeat=1 count=60000 size=250 seed=122
test com.persistit.stress.Stress1 repeat=1 count=600000
test com.persistit.stress.Stress2 repeat=1 count=1000000 seed=218
test com.persistit.stress.Stress1 repeat=1 count=10000000

test com.persistit.stress.Stress2 repeat=10 count=30000 seed=119
test com.persistit.stress.Stress5 repeat=50 count=10000
test com.persistit.stress.Stress6 repeat=3 count=5000 size=250
test com.persistit.stress.Stress7 repeat=10 count=6000 size=250 seed=123
test com.persistit.stress.Stress1 repeat=10 count=60000
test com.persistit.stress.Stress2 repeat=1 count=1000000 seed=219
test com.persistit.stress.Stress1 repeat=10 count=1000000

test com.persistit.stress.Stress2 repeat=10 count=30000 seed=120
test com.persistit.stress.Stress5 repeat=50 count=10000
test com.persistit.stress.Stress6 repeat=3 count=5000 size=250
test com.persistit.stress.Stress7 repeat=10 count=6000 size=250 seed=124
test com.persistit.stress.Stress1 repeat=10 count=60000
test com.persistit.stress.Stress2 repeat=3 count=100000 seed=220

icheck persistit

waitIfFailed Please examine the failure!

wait Watch the log files go away

close

