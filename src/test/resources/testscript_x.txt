logpath $logpath$/result_$timestamp$.log


#Stress-1 test mixture, multithread, small pool, temporary volume
delete $datapath$/persistit*

clearprops
prop buffer.count.8192=1000
prop volume.1=$datapath$/persistit.v01,temporary,bufferSize:8192,initialPages:10K,extensionPages:10K,maximumPages:1M
prop journalpath=$datapath$/persistit_journal
prop logpath=$datapath$/persistit_log
prop rmiport=1099

init
test com.persistit.test.ConfirmEmptyVolumeTest persistit.v01

multithread
test com.persistit.stress.Stress1 repeat=10 count=10000
test com.persistit.stress.Stress2 repeat=5 count=10000 seed=117
test com.persistit.stress.Stress3 repeat=5 count=10000 seed=119
test com.persistit.stress.Stress1 repeat=10 count=10000
test com.persistit.stress.Stress5 repeat=20 count=2000
test com.persistit.stress.Stress6 repeat=10 count=500 size=250
test com.persistit.stress.Stress7 repeat=10 count=500 size=250 seed=122
icheck persistit
waitIfFailed Please examine the failure!
close
init
test com.persistit.test.ConfirmEmptyVolumeTest persistit.v01
close


#Stress-2 test mixture, multithread, small pool, temporary volume

clearprops
prop buffer.count.8192=1000
prop volume.1=$datapath$/persistit.v01,temporary,bufferSize:8192,initialPages:10K,extensionPages:10K,maximumPages:1M
prop journalpath=$datapath$/persistit_journal
prop logpath=$datapath$/persistit_log
prop rmiport=1099

init
test com.persistit.test.ConfirmEmptyVolumeTest persistit.v01

multithread
test com.persistit.stress.Stress1 repeat=10 count=10000
test com.persistit.stress.Stress2 repeat=5 count=10000 seed=117
test com.persistit.stress.Stress3 repeat=5 count=10000 seed=119
test com.persistit.stress.Stress1 repeat=10 count=10000
test com.persistit.stress.Stress5 repeat=20 count=2000
test com.persistit.stress.Stress6 repeat=10 count=500 size=250
test com.persistit.stress.Stress7 repeat=10 count=500 size=250 seed=122
icheck persistit
waitIfFailed Please examine the failure!
close
init
test com.persistit.test.ConfirmEmptyVolumeTest persistit.v01
close

